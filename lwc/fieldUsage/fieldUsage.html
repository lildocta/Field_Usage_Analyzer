<template>
    <lightning-card title="Field Usage Analyzer">
        <lightning-button
            slot="actions"
            onclick={usageNumbersCallout} 
            label="Analyze" 
            variant="brand"
            disabled={objectSelected}>
        </lightning-button> 
        <div class="slds-size_1-of-3 slds-m-left_medium">
            <lightning-combobox label="Select an Object" options={lObjectOptions} onchange={setObject}></lightning-combobox>
        </div>
        <template if:true={showFields}>
            <lightning-dual-listbox 
                class="slds-m-around_medium"
                name="Field Usage"
                label="Select Fields To Analyze"
                source-label="Available"
                selected-label="Selected"
                field-level-help="Field Usage Report Generator"
                options={mLabelToAPI}
                onchange={updateSelectedList}>
            </lightning-dual-listbox>
        </template>
        <template if:true={hasResults}>
            <div  class="slds-m-around_medium">
                <lightning-datatable
                    columns={columns}
                    data={data}
                    key-field="apiName"
                    is-loading={tableLoading}
                    hide-checkbox-column>
                </lightning-datatable>
            </div>
        </template>
    </lightning-card>
</template>